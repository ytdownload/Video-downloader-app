<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video Downloader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .loader {
            border-top-color: #3498db;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-4xl">
        
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-800 dark:text-white">YouTube Downloader</h1>
            <p class="text-md sm:text-lg text-gray-600 dark:text-gray-400 mt-2">Paste a YouTube video URL below to get download links.</p>
        </header>

        <!-- Main Content -->
        <main>
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 sm:p-8">
                <!-- Input Form -->
                <form id="download-form" class="flex flex-col sm:flex-row items-center gap-4">
                    <div class="relative flex-grow w-full">
                        <svg class="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
                        <input type="text" id="video-url" placeholder="https://www.youtube.com/watch?v=..." class="w-full pl-12 pr-4 py-3 bg-gray-100 dark:bg-gray-700 border-2 border-transparent focus:border-blue-500 focus:ring-0 rounded-xl transition duration-300" required>
                    </div>
                    <button type="submit" id="submit-button" class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-xl shadow-md hover:shadow-lg transition duration-300 flex items-center justify-center">
                        <span id="button-text">Get Links</span>
                        <div id="loader" class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-6 w-6 ml-3 hidden"></div>
                    </button>
                </form>

                <!-- Error Message -->
                <div id="error-message" class="hidden mt-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 rounded-lg">
                    <p><strong>Error:</strong> <span id="error-text"></span></p>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-container" class="mt-8 hidden">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 sm:p-8">
                    <div class="flex flex-col md:flex-row items-center gap-6">
                        <img id="thumbnail" src="https://placehold.co/320x180/e2e8f0/4a5568?text=Thumbnail" alt="Video Thumbnail" class="w-full md:w-1/3 rounded-lg shadow-md">
                        <div class="flex-grow">
                            <h2 id="video-title" class="text-xl font-bold text-gray-800 dark:text-white">Video Title Goes Here</h2>
                            <p id="video-author" class="text-gray-600 dark:text-gray-400 mt-1">by Author</p>
                        </div>
                    </div>
                    <div id="download-links" class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Download links will be inserted here -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-12 text-sm text-gray-500 dark:text-gray-400">
            <p>Disclaimer: This tool is for personal use only. Please respect the copyright of the content creators.</p>
            <p class="mt-1">Powered by <a href="https://co.wuk.sh/" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:underline">Cobalt</a> API.</p>
        </footer>

    </div>

    <script>
        // DOM Elements
        const form = document.getElementById('download-form');
        const urlInput = document.getElementById('video-url');
        const submitButton = document.getElementById('submit-button');
        const buttonText = document.getElementById('button-text');
        const loader = document.getElementById('loader');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');
        const resultsContainer = document.getElementById('results-container');
        const thumbnail = document.getElementById('thumbnail');
        const videoTitle = document.getElementById('video-title');
        const videoAuthor = document.getElementById('video-author');
        const downloadLinksContainer = document.getElementById('download-links');

        // The public API endpoint
        const API_ENDPOINT = "https://co.wuk.sh/api/json";

        /**
         * Handles the form submission.
         * @param {Event} e - The form submission event.
         */
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const videoUrl = urlInput.value.trim();

            if (!videoUrl) {
                showError("Please enter a YouTube URL.");
                return;
            }

            // Reset UI
            hideError();
            resultsContainer.classList.add('hidden');
            downloadLinksContainer.innerHTML = '';
            setLoading(true);

            try {
                // Prepare the request to the Cobalt API
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        url: videoUrl,
                        vQuality: '1080', // Request a good default quality
                        isAudioOnly: false
                    })
                });

                const result = await response.json();

                // Check for errors from the API
                if (result.status === 'error' || result.status === 'redirect') {
                     showError(result.text || "Could not process the video. The URL might be invalid or private.");
                } else if (result.status === 'stream') {
                    // On success, display the results
                    displayResults(result);
                } else {
                    showError("An unknown error occurred. The API might be down.");
                }

            } catch (err) {
                console.error("Fetch error:", err);
                showError("Failed to connect to the download service. Please check your internet connection or try again later.");
            } finally {
                setLoading(false);
            }
        });

        /**
         * Displays the video information and download links.
         * @param {object} data - The API response data.
         */
        function displayResults(data) {
            thumbnail.src = data.picker.find(p => p.type === 'video')?.thumb || 'https://placehold.co/320x180/e2e8f0/4a5568?text=Thumbnail';
            videoTitle.textContent = data.picker.find(p => p.type === 'video')?.title || 'Unknown Title';
            videoAuthor.textContent = `by ${data.picker.find(p => p.type === 'video')?.author || 'Unknown Author'}`;

            // Create video download links
            if (data.picker) {
                data.picker.forEach(item => {
                    if (item.url) {
                        const quality = item.quality ? `${item.quality}p` : (item.type === 'audio' ? 'Audio' : 'Video');
                        const format = item.format || 'mp4';
                        const link = createDownloadButton(item.url, `${quality} (${format.toUpperCase()})`, item.type);
                        downloadLinksContainer.appendChild(link);
                    }
                });
            }
            
            // Add the main audio-only link if available
            if(data.audio) {
                 const audioLink = createDownloadButton(data.audio, 'Best Audio (MP3)', 'audio');
                 downloadLinksContainer.appendChild(audioLink);
            }


            resultsContainer.classList.remove('hidden');
        }

        /**
         * Creates a styled download button.
         * @param {string} url - The download URL.
         * @param {string} text - The text to display on the button.
         * @param {string} type - 'video' or 'audio'.
         * @returns {HTMLAnchorElement} The created anchor element.
         */
        function createDownloadButton(url, text, type) {
            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank'; // Open in new tab to start download
            link.rel = 'noopener noreferrer';
            
            const bgColor = type === 'audio' ? 'bg-green-500 hover:bg-green-600' : 'bg-blue-500 hover:bg-blue-600';
            
            link.className = `flex items-center justify-center gap-2 p-3 ${bgColor} text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition duration-300`;
            
            const iconSvg = type === 'audio' 
                ? `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>`
                : `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m22 8-6 4 6 4V8Z"></path><rect width="14" height="12" x="2" y="6" rx="2" ry="2"></rect></svg>`;
            
            link.innerHTML = `${iconSvg}<span>${text}</span>`;
            
            return link;
        }

        /**
         * Sets the loading state of the UI.
         * @param {boolean} isLoading - Whether to show the loader.
         */
        function setLoading(isLoading) {
            if (isLoading) {
                buttonText.classList.add('hidden');
                loader.classList.remove('hidden');
                submitButton.disabled = true;
                submitButton.classList.add('cursor-not-allowed');
            } else {
                buttonText.classList.remove('hidden');
                loader.classList.add('hidden');
                submitButton.disabled = false;
                submitButton.classList.remove('cursor-not-allowed');
            }
        }

        /**
         * Shows an error message in the UI.
         * @param {string} message - The error message to display.
         */
        function showError(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
        }

        /**
         * Hides the error message.
         */
        function hideError() {
            errorMessage.classList.add('hidden');
        }
    </script>
</body>
</html>
